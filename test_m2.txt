
> audiomanager@1.0.0 test C:\Users\timot\antigravity\audiomanager
> vitest run "--reporter=verbose"


[1m[7m[36m RUN [39m[27m[22m [36mv2.1.9 [39m[90mC:/Users/timot/antigravity/audiomanager[39m

 [32mΓ£ô[39m tests/sanity.test.ts[2m > [22mSanity Check[2m > [22mshould pass
 [32mΓ£ô[39m tests/audio.test.ts[2m > [22mM2 Audio Services (Unit Tests)[2m > [22mprobeAudio[2m > [22mshould parse ffprobe JSON output
 [32mΓ£ô[39m tests/audio.test.ts[2m > [22mM2 Audio Services (Unit Tests)[2m > [22mnormalizeAudio[2m > [22mshould call ffmpeg with correct normalization args
 [32mΓ£ô[39m tests/audio.test.ts[2m > [22mM2 Audio Services (Unit Tests)[2m > [22mtranscodeAudio[2m > [22mshould call ffmpeg with correct transcode args
 [31m├ù[39m tests/audio.test.ts[2m > [22mM2 Audio Services (Unit Tests)[2m > [22mhashFile[2m > [22mshould compute SHA-256 hash and write to .sha256 file
[31m   ΓåÆ expected 'ae87387cd4fb27eb9a64ae131341e9bb3e8deΓÇª' to be 'a948904f2f0f479b8f8197694b30184b0d2edΓÇª' // Object.is equality[39m
 [31m├ù[39m tests/audio.test.ts[2m > [22mM2 Audio Services (Unit Tests)[2m > [22mhashFile[2m > [22mshould verify matching hash
[31m   ΓåÆ expected false to be true // Object.is equality[39m
[90mstdout[2m | tests/services.test.ts[2m > [22m[2mM1 Service Layer Integration[2m > [22m[2mshould import actors from CSV and rebuild indexes
[22m[39mIndexes rebuilt.

 [32mΓ£ô[39m tests/services.test.ts[2m > [22mM1 Service Layer Integration[2m > [22mshould import actors from CSV and rebuild indexes
 [32mΓ£ô[39m tests/services.test.ts[2m > [22mM1 Service Layer Integration[2m > [22mshould import actors from CSV and rebuild indexes[33m 4086[2mms[22m[39m
 [32mΓ£ô[39m tests/services.test.ts[2m > [22mM1 Service Layer Integration[2m > [22mshould import dialogues from CSV
 [32mΓ£ô[39m tests/services.test.ts[2m > [22mM1 Service Layer Integration[2m > [22mshould import dialogues from CSV

node.exe : 
[31mΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»[1m[7m 
Failed Tests 2 
[27m[22mΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»[39m
At C:\Users\timot\AppData\Roaming\npm\pnp
m.ps1:24 char:5
+     & "node$exe"  "$basedir/node_module
s/pnpm/bin/pnpm.cjs" $args
+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecifi 
   ed: ([31mΓÄ»ΓÄ»ΓÄ»Γ...»ΓÄ»ΓÄ»ΓÄ»[3  
  9m:String) [], RemoteException
    + FullyQualifiedErrorId : NativeComm 
   andError
 

[31m[1m[7m FAIL [27m[22m[39m 
tests/audio.test.ts[2m > [22mM2 Audio 
Services (Unit Tests)[2m > 
[22mhashFile[2m > [22mshould compute 
SHA-256 hash and write to .sha256 file
[31m[1mAssertionError[22m: expected 'a
e87387cd4fb27eb9a64ae131341e9bb3e8deΓÇª' 
to be 'a948904f2f0f479b8f8197694b30184b0d
2edΓÇª' // Object.is equality[39m

Expected: [32m"a[7m948904f2f0f479b8f819
7694b30184b0d2ed1c1cd2a1ec0fb85d299a192a4
47[27m"[39m
Received: [31m"a[7me87387cd4fb27eb9a64a
e131341e9bb3e8de5002ca7b266931a811b23c07b
c9[27m"[39m

[36m [2mΓ¥»[22m 
tests/audio.test.ts:[2m107:26[22m[39m
    [90m105| [39m            
[35mconst[39m hash [33m=[39m 
[35mawait[39m [34mhashFile[39m([32m'
/test.wav'[39m)[33m;[39m
    [90m106| [39m
    [90m107| [39m            [34mexpec
t[39m(hash)[33m.[39m[34mtoBe[39m(exp
ectedHash)[33m;[39m
    [90m   | [39m                      
   [31m^[39m
    [90m108| [39m            [34mexpec
t[39m(fs[33m.[39mwriteFile)[33m.[39m
[34mtoHaveBeenCalledWith[39m([32m'/tes
t.wav.sha25[39mΓÇª
    [90m109| [39m        })[33m;[39m

[31m[2mΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ
»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»[
1/2]ΓÄ»[22m[39m

[31m[1m[7m FAIL [27m[22m[39m 
tests/audio.test.ts[2m > [22mM2 Audio 
Services (Unit Tests)[2m > 
[22mhashFile[2m > [22mshould verify 
matching hash
[31m[1mAssertionError[22m: expected 
false to be true // Object.is 
equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2mΓ¥»[22m 
tests/audio.test.ts:[2m123:29[22m[39m
    [90m121| [39m            
[35mconst[39m isValid [33m=[39m 
[35mawait[39m [34mverifyHash[39m([32
m'/test.wav'[39m)[33m;[39m
    [90m122| [39m
    [90m123| [39m            [34mexpec
t[39m(isValid)[33m.[39m[34mtoBe[39m(
[35mtrue[39m)[33m;[39m
    [90m   | [39m                      
      [31m^[39m
    [90m124| [39m        })[33m;[39m
    [90m125| [39m    })[33m;[39m

[31m[2mΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ
»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»[
2/2]ΓÄ»[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m6 passed[39m[22m[90m (8)[39m
[2m   Start at [22m 18:50:11
[2m   Duration [22m 5.29s[2m (transform 314ms, setup 0ms, collect 685ms, tests 4.26s, environment 1ms, prepare 809ms)[22m

ΓÇëELIFECYCLEΓÇë Test failed. See above for more details.
